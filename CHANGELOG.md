# Changelog

## 1.0.0

### Changed

* **[BREAKING]** Removed `Camille::Type#test` in favour of `Camille::Type#check`.
* Decimal and DateTime types are no longer generated for installation.

## 0.6.4

### Changed

* **[BREAKING]** Calling `transform` before `check` is now each custom type's responsibility. To migrate, copy the `check` method [here](https://github.com/onyxblade/camille/commit/00fb254667480c3a2ce222209b09f7afd714fd5d#diff-94b933f5da6d8a5cfd11e24fd89c85cd8e788e4f25ca86a94bbf8aaabaade207R13) to existing custom types that make use of `transform`.
* Warning comment is moved to config.ts_header.

## 0.6.3

### Added

* Allow accessing Rails models from type files.

## 0.6.2

### Added

* Added `Camille::Rendered` to store type-checked JSON string. Using this can skip type-check and JSON rendering.
* Added `Camille::Checked#render` to generate `Camille::Rendered`.

### Changed

* Use `JSON.dump` instead of ActiveSupport `.to_json`.

## 0.6.1

### Fixed

* Tuple type checking now checks length.

## 0.6.0

### Added

* Support Rails 8.0

## 0.5.16

### Fixed

* Record keys will no longer be case converted

## 0.5.15

### Added

* Added key conversion cache

### Changed

* When generating TS, endpoints are now sorted by name

## 0.5.14

### Fixed

* Fixed support for `render json: false`

## 0.5.13

### Fixed

* Fixed that `Omit` and `Pick` did not preserve optional fields

## 0.5.12

### Added

* Added `.test` to `Camille::Type`
* Added error details to `Camille::TypeError#inspect` and `#to_s`

### Changed

* Removed `Camille::TypeError#print` since details are now in `#inspect`

## 0.5.11

### Changed

* Optional fields are now preserved in generated TypeScript as having `?` suffix

## 0.5.10

### Added

* Added intersection and boolean literal support to `Camille::Syntax`

## 0.5.9

### Added

* Added intersection type
* Added #print to Camille::TypeError

### Changed

* Typecheck will no longer remove fields from a hash if those fields are not presented in type schema

### Fixed

* Fixed the wrong literal generated by an array of unions

## 0.5.8

### Added

* `render` call with a status code other than 200 will skip the typecheck

### Fixed

* `head 401` will no longer raise Camille::Controller::MissingRenderError

## 0.5.7

### Added

* Camille::Controller::MissingRenderError will now be raised if `render json:` is missing in action body
* ActionController::MissingExactTemplate is re-raised as Camille::Controller::MissingRenderError

## 0.5.6

### Added

* Added record type

## 0.5.5

### Added

* Added case conversion check for object keys.

## 0.5.4

### Added

* Symbols are now accepted in string literal types

### Changed

* Reverted previous change to use `{}` for omitted response type

## 0.5.3

### Added

* Added boolean literal types

### Changed

* Renamed `Camille::ControllerExtension` to `Camille::Controller`

## 0.5.2

### Added

* Symbols are now accepted in string types
* When omitted, the response type of an endpoint will now have the default `{}`

## 0.5.1

### Fixed

* Fixed the wrong error returned for `union.left`

## 0.5.0

### Changed

* Pick and Omit now use a new syntax, so it can handle snake to camel case conversion correctly

## 0.4.3

### Fixed

* Fixed the error that values not getting transformed in array/tuple/union types
* Fixed optional fields getting `nil` due to transformation

## 0.4.2

### Added

* Supported `transform` for custom types
* Added default DateTime and Decimal type to install generator

## 0.4.1

### Added

* Added utility types Pick and Omit

### Fixed

* Prevent loader errors from being silently rescued by Rails in development environment

## 0.4.0

The first stable release